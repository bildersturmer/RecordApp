<Window x:Class="RecordApp.Views.MainWindow" 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
xmlns:local="clr-namespace:RecordApp.Services"
mc:Ignorable="d" 
Title="Record App" Height="450" Width="900" 
WindowStartupLocation="CenterScreen" 
ResizeMode="CanResize" 
Background="White">

    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*" />
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="2*" />
        </Grid.ColumnDefinitions>

        <!-- Master List -->

        <!--
        <ListBox ItemsSource="{Binding Accounts}" SelectedItem="{Binding SelectedAccount}" 
                 DisplayMemberPath="Name" Grid.Column="0" Margin="10" FontSize="16" 
                 FontFamily="Arial" Name="RecordListBox" IsSynchronizedWithCurrentItem="True" 
                  />
        -->

        <ListBox ItemsSource="{Binding Accounts}" SelectedItem="{Binding SelectedAccount}" 
                 DisplayMemberPath="Name" Grid.Column="0" Margin="10" FontSize="16" 
                 FontFamily="Arial" IsSynchronizedWithCurrentItem="True" 
                  />


        <!--
        <ListBox Grid.Column="0" Margin="10" FontSize="16" FontFamily="Arial" Name="RecordListBox">
            <ListBoxItem>Record A</ListBoxItem> <ListBoxItem>Record B</ListBoxItem> <ListBoxItem>Record C</ListBoxItem>
        </ListBox>
        -->


        <!-- Detail Panel -->
        <Grid Grid.Column="1" Margin="10">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Account Ref -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,5">
                <Label Content="Account Ref No:" Width="130"/>
                <TextBox Name="txtAccRefNo" Width="200" Text="{Binding SelectedAccount.AccRefNo}" />
            </StackPanel>

            <!-- Name -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,5">
                <Label Content="Name:" Width="130"/>
                <TextBox Name="txtName" Width="200" Text="{Binding SelectedAccount.Name}" />
            </StackPanel>

            <!-- Address -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,5">
                <Label Content="Address:" Width="130"/>
                <TextBox Name="txtAddress" Width="200" Text="{Binding SelectedAccount.Address}" />
            </StackPanel>

            <!-- Units Used -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,5">
                <Label Content="Units Used:" Width="130"/>
                <TextBox Name="txtUnits" Width="200" Text="{Binding SelectedAccount.Units}" IsReadOnly="True" />
            </StackPanel>

            <!-- Balance -->
            <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,5">
                <Label Content="Balance Owed:" Width="130"/>
                <TextBox Name="txtBalance" Width="200" Text="{Binding SelectedAccount.Balance}" IsReadOnly="True" />
            </StackPanel>

            <!-- Unit cost -->
            <StackPanel Grid.Row="5" Orientation="Horizontal" Margin="0,5">
                <Label Content="Unit cost:" Width="130"/>
                <!-- TextBox Name="txtUnitCost" Width="200" Text="{x:Static local:GasAccount.UnitCost}" IsReadOnly="True" / -->
                <TextBox Name="txtUnitCost" Width="200" Text="{Binding UnitCost, Mode=OneWay}" IsReadOnly="True" />
            </StackPanel>

            
            <!-- Record Units -->
            <!--
            <StackPanel Grid.Row="6" Orientation="Horizontal" Margin="0,5">
                <TextBox Name="txtRecordUnits" IsReadOnly="{Binding IsRecordUnitsReadOnly}" Width="200" KeyDown="txtRecordUnits_KeyDown" />
                <Button Content="Record Units Used" Command="{Binding RecordUnitsCommand}" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right" Click="Button_Click_1"/>
            </StackPanel>
            -->

            <StackPanel Grid.Row="6" Orientation="Horizontal" Margin="0,5">
                <TextBox Name="txtRecordUnits" IsReadOnly="{Binding IsRecordUnitsReadOnly}" Width="200" Text="{Binding RecordUnitsInput, UpdateSourceTrigger=PropertyChanged}" />
                <!-- <Button Content="Record Units Used" Command="{Binding RecordUnitsCommand}" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right" Click="Button_Click_1"/> -->
                <Button Content="Record Units Used" Command="{Binding RecordUnitsCommand}" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right" />
            </StackPanel>


            <!-- Deposit Button -->
            <!-- 06/11/2025
            <StackPanel Grid.Row="7" Orientation="Horizontal" Margin="0,5">
                <TextBox Name="txtMakeDeposit" Width="200" IsReadOnly="True"/>
                <Button Content="Make Deposit" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right"/>
            </StackPanel>
            -->

            <!-- Make Deposit -->
            <StackPanel Grid.Row="7" Orientation="Horizontal" Margin="0,5">
                <TextBox Width="200" Text="{Binding DepositInput, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="{Binding IsDepositReadOnly}" />
                <Button Content="Make Deposit" Command="{Binding DepositCommand}" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right" />
            </StackPanel>


            <!-- Set the Unit Price -->
            <!--
            <StackPanel Grid.Row="8" Orientation="Horizontal" Margin="0,5">
                <TextBox Name="txtSetUnitPrice" Width="200" IsReadOnly="True"/>
                <Button Content="Set Unit Price" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right" />
            </StackPanel>
            -->

            <StackPanel Grid.Row="8" Orientation="Horizontal" Margin="0,5">
                <TextBox Width="200" Text="{Binding UnitPriceInput, UpdateSourceTrigger=PropertyChanged}" IsReadOnly="{Binding IsUnitPriceReadOnly}" />
                <Button Content="Set Unit Price" ToolTip="Unit Price will be modified for all accounts." Command="{Binding UnitPriceCommand}" IsEnabled="{Binding IsAdmin}" Width="120" Margin="10,5,10,5" HorizontalAlignment="Right" />
            </StackPanel>



        </Grid>

        <!-- List Control Panel -->
        <Grid Grid.Column="2" Margin="10">

            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Load Customers -->
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,5">
                <!-- Button Content="Load Customers" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" Click="Button_Click"/ -->
                <Button Content="Load Customers" Command="{Binding LoadCustomersCommand}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" />
                <TextBox Name="txtLoadListStatus" Width="200" IsReadOnly="True"/>
            </StackPanel>
            
            <!-- TEMP
                <Button Content="New Customer" Command="{Binding NewCustomerCommand}" Margin="5"/>
                <Button Content="Confirm New Customer" Command="{Binding ConfirmNewCustomerCommand}" Margin="5"/>
            END TEMP -->

            <!-- New Customer -->
            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,5">
                <!-- Button Content="New Customer" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" Click="Button_Click"/ -->
                <Button Content="New Customer" Command="{Binding NewCustomerCommand}" IsEnabled="{Binding IsAdmin}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left"/>
                <TextBox Name="txtNewCustomerStatus" Width="200" IsReadOnly="True"/>
            </StackPanel>

            <!-- Confirm New Customer -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,5">
                <!-- Button Content="New Customer" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" Click="Button_Click"/ -->
                <!-- Button Content=" Confirm New " Command="{Binding NewCustomerCommand}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left"/ -->
                <Button Content="CONFIRM NEW " Command="{Binding ConfirmNewCustomerCommand}" IsEnabled="{Binding IsAdmin}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left"/>
                <TextBox Name="txtConfirmNewCustomerStatus" Width="200" IsReadOnly="True"/>
            </StackPanel>            
            
            <!-- Delete Customer -->
            <StackPanel Grid.Row="3" Orientation="Horizontal" Margin="0,5">
                <!-- Button Content="Delete Customer" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" Click="Button_Click"/ -->
                <!-- Button Content="Delete Customer" Command="{Binding DeleteCustomerCommand}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" / -->
                <Button Content="Delete Customer" Command="{Binding DeleteCustomerCommand}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" />
                <TextBox Name="txtDeleteCustomerStatus" Width="200" IsReadOnly="True"/>
            </StackPanel>
 
            <!-- Save and Exit -->
            <StackPanel Grid.Row="4" Orientation="Horizontal" Margin="0,5">
                <!--Button Content="Save and Exit" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left" Click="Button_Click"/ -->
                <Button Content="Save and Exit" Command="{Binding SaveCustomersCommand}" Width="120" Margin="0,5,10,5" HorizontalAlignment="Left"/>
                <TextBox Name="txtSaveAndExitStatus" Width="200" IsReadOnly="True"/>
            </StackPanel>

        </Grid>

    </Grid>

</Window>